 <!-- ***** BEGIN LICENSE BLOCK *****
   - Version: MPL 1.1
   -
   - The contents of this file are subject to the Mozilla Public License Version
   - 1.1 (the "License"); you may not use this file except in compliance with
   - the License. You may obtain a copy of the License at
   - http://www.mozilla.org/MPL/
   -
   - Software distributed under the License is distributed on an "AS IS" basis,
   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
   - for the specific language governing rights and limitations under the
   - License.
   -
   - The Original Code is Raindrop.
   -
   - The Initial Developer of the Original Code is
   - Mozilla Messaging, Inc..
   - Portions created by the Initial Developer are Copyright (C) 2009
   - the Initial Developer. All Rights Reserved.
   -
   - Contributor(s):
   - -->
<!DOCTYPE html>
<html>
<head>
  <title>Embed Test</title>
  <style>

  </style>
  <script src="../scripts/requireplugins-jquery-1.4.2.js" charset="utf-8"></script>
  <script src="../embed/moz.js" charset="utf-8"></script>
  <script>
    function doneNotification(topic, data) {
      if (topic && topic === 'contacts/receive') {
        contactsString = JSON.stringify(data);
        $('#contactsOut').html(contactsString);
        return;
      }

      $('#' + topic).fadeIn(500).delay(2000).fadeOut();
    }
    $(function () {
      $('body')
        .delegate('.share', 'click', function (evt) {
          var target = evt.target,
              url = target.getAttribute('data-url'),
              title = target.getAttribute('data-title'),
              thumbnail = target.getAttribute('data-thumbnail'),
              args = {};

          if (url) {
            args.url = url;
          }
          if (title) {
            args.title = title;
          }
          if (thumbnail) {
            args.thumbnail = thumbnail;
          }

          moz.labs.shareEmbed(args, doneNotification);
        })
        .delegate('.contacts', 'click', function (evt) {
          moz.labs.contacts(doneNotification);
        });
    });
  </script>
</head>
<body>
<h1>Embed Test</h1>

<button class="share" data-url="http://google.com" data-title="Google">Share Google</button>

<button class="contacts">Contacts</button>

<div id="shareDone" class="status" style="display: none">
  Thanks for sharing!
</div>

<div id="shareClose" class="status" style="display: none">
  You closed the share UI.
</div>


<div id="contactsOut">

</div>

</body>
</html>
